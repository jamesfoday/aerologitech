{% extends "base.html" %}
{% load static %}

{% block title %}Orders — Aircar{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="card p-4 round-24">

    {# Back target depends on role #}
    {% if request.user.is_staff or request.user.is_superuser %}
      <a href="/dashboard/" class="text-decoration-none mb-3 d-inline-flex align-items-center" style="color:#6b7280;">
        <i class="bi bi-chevron-left me-1"></i> Back
      </a>
    {% else %}
      <a href="{% url 'accounts:dashboard' %}" class="text-decoration-none mb-3 d-inline-flex align-items-center" style="color:#6b7280;">
        <i class="bi bi-chevron-left me-1"></i> Back
      </a>
    {% endif %}

    <h4 class="mb-3">Orders for {{ u.get_full_name|default:u.username }}</h4>

    <div class="mt-3">
      {% if orders %}
        {% for o in orders %}
          <div class="list-tile d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ o.get_category_display }}</strong>
              • €{{ o.amount }}
              • {{ o.created_at|date:"M d, Y" }}
            </div>
            <span class="badge bg-light text-dark">{{ o.status }}</span>
          </div>
        {% endfor %}
      {% else %}
        <div class="empty">No orders yet.</div>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}
